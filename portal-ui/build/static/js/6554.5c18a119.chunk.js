"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[6554],{92217:function(e,n,t){var i=t(1413),r=t(72791),a=t(61889),o=t(30829),s=t(20068),l=t(64554),c=t(11135),d=t(25787),u=t(75952),f=t(23814),h=t(78029),p=t.n(h),x=t(24784),m=t(27454),v=t(80184);n.Z=(0,d.Z)((function(e){return(0,c.Z)((0,i.Z)({},f.YI))}))((function(e){var n=e.value,t=e.label,i=void 0===t?"":t,c=e.tooltip,d=void 0===c?"":c,f=e.mode,h=void 0===f?"json":f,b=e.classes,Z=e.onBeforeChange,g=(e.readOnly,e.editorHeight),j=void 0===g?"250px":g;return(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(a.ZP,{item:!0,xs:12,sx:{marginBottom:"10px"},children:(0,v.jsxs)(o.Z,{className:b.inputLabel,children:[(0,v.jsx)("span",{children:i}),""!==d&&(0,v.jsx)("div",{className:b.tooltipContainer,children:(0,v.jsx)(s.Z,{title:d,placement:"top-start",children:(0,v.jsx)("div",{className:b.tooltip,children:(0,v.jsx)(u.byK,{})})})})]})}),(0,v.jsx)(a.ZP,{item:!0,xs:12,style:{maxHeight:j,overflow:"auto",border:"1px solid #eaeaea"},children:(0,v.jsx)(x.Z,{value:n,language:h,onChange:function(e){Z(null,null,e.target.value)},id:"code_wrapper",padding:15,style:{fontSize:12,backgroundColor:"#fefefe",fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace",minHeight:j||"initial",color:"#000000"}})}),(0,v.jsx)(a.ZP,{item:!0,xs:12,sx:{background:"#f7f7f7",border:"1px solid #eaeaea",borderTop:0},children:(0,v.jsx)(l.Z,{sx:{display:"flex",alignItems:"center",padding:"2px",paddingRight:"5px",justifyContent:"flex-end","& button":{height:"26px",width:"26px",padding:"2px"," .min-icon":{marginLeft:"0"}}},children:(0,v.jsx)(m.Z,{tooltip:"Copy to Clipboard",children:(0,v.jsx)(p(),{text:n,children:(0,v.jsx)(u.zxk,{type:"button",id:"copy-code-mirror",icon:(0,v.jsx)(u.TIy,{}),color:"primary",variant:"regular"})})})})})]})}))},14662:function(e,n,t){t.d(n,{Z:function(){return A}});var i=t(1413),r=t(29439),a=t(72791),o=t(64554),s=t(43896),l=t(80184),c=a.createContext(null);function d(e){var n=e.children,t=e.value,i=function(){var e=a.useState(null),n=(0,r.Z)(e,2),t=n[0],i=n[1];return a.useEffect((function(){i("mui-p-".concat(Math.round(1e5*Math.random())))}),[]),t}(),o=a.useMemo((function(){return{idPrefix:i,value:t}}),[i,t]);return(0,l.jsx)(c.Provider,{value:o,children:n})}function u(){return a.useContext(c)}function f(e,n){return null===e.idPrefix?null:"".concat(e.idPrefix,"-P-").concat(n)}function h(e,n){return null===e.idPrefix?null:"".concat(e.idPrefix,"-T-").concat(n)}var p=t(87462),x=t(63366),m=t(18073),v=["children"],b=a.forwardRef((function(e,n){var t=e.children,i=(0,x.Z)(e,v),r=u();if(null===r)throw new TypeError("No TabContext provided");var o=a.Children.map(t,(function(e){return a.isValidElement(e)?a.cloneElement(e,{"aria-controls":f(r,e.props.value),id:h(r,e.props.value)}):null}));return(0,l.jsx)(m.Z,(0,p.Z)({},i,{ref:n,value:r.value,children:o}))})),Z=t(28182),g=t(66934),j=t(31402),y=t(94419),C=t(21217);function E(e){return(0,C.Z)("MuiTabPanel",e)}(0,t(75878).Z)("MuiTabPanel",["root"]);var P=["children","className","value"],w=(0,g.ZP)("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:function(e,n){return n.root}})((function(e){return{padding:e.theme.spacing(3)}})),S=a.forwardRef((function(e,n){var t=(0,j.Z)({props:e,name:"MuiTabPanel"}),i=t.children,r=t.className,a=t.value,o=(0,x.Z)(t,P),s=(0,p.Z)({},t),c=function(e){var n=e.classes;return(0,y.Z)({root:["root"]},E,n)}(s),d=u();if(null===d)throw new TypeError("No TabContext provided");var m=f(d,a),v=h(d,a);return(0,l.jsx)(w,(0,p.Z)({"aria-labelledby":v,className:(0,Z.Z)(c.root,r),hidden:a!==d.value,id:m,ref:n,role:"tabpanel",ownerState:s},o,{children:a===d.value&&i}))})),N=t(25787),T=t(13967),M=t(11135),R=t(95193),F=t(57689),L={minHeight:60},A=(0,N.Z)((function(e){return(0,M.Z)({tabsContainer:{display:"flex",height:"100%",width:"100%"},tabsHeaderContainer:{width:"300px",background:"#F8F8F8",borderRight:"1px solid #EAEAEA","& .MuiTabs-root":{"& .MuiTabs-indicator":{display:"none"},"& .MuiTab-root":{display:"flex",flexFlow:"row",alignItems:"center",justifyContent:"flex-start",borderBottom:"1px solid #EAEAEA","& .MuiSvgIcon-root":{marginRight:8,marginBottom:0},"&.Mui-selected":{background:"#E5E5E5",fontWeight:600}},"&. MuiTabs-scroller":{display:"none"}}},tabContentContainer:{width:"100%","& .MuiTabPanel-root":{height:"100%"}},tabPanel:{height:"100%"},"@media (max-width: 900px)":{tabsContainer:{flexFlow:"column",flexDirection:"column"},tabsHeaderContainer:{width:"100%",borderBottom:" 1px solid #EAEAEA","& .MuiTabs-root .MuiTabs-scroller .MuiButtonBase-root":{borderBottom:" 0px"}}}})}))((function(e){var n=e.children,t=e.classes,c=e.selectedTab,u=void 0===c?"0":c,f=e.routes,h=e.isRouteTabs,p=(0,T.Z)(),x=(0,F.TH)().pathname,m=void 0===x?"":x,v=(0,R.Z)(p.breakpoints.down("md")),Z=(0,a.useState)(u),g=(0,r.Z)(Z,2),j=g[0],y=g[1],C=[],E=[];if((0,a.useEffect)((function(){if(h){var e=n.find((function(e){return e.tabConfig.to===m}));e&&y(e.tabConfig.value)}}),[h,n,m]),!n)return null;n.forEach((function(e){C.push(e.tabConfig),E.push(e.content)}));return(0,l.jsx)(d,{value:"".concat(j),children:(0,l.jsxs)(o.Z,{className:t.tabsContainer,children:[(0,l.jsx)(o.Z,{className:t.tabsHeaderContainer,children:(0,l.jsx)(b,{onChange:function(e,n){y(n)},orientation:v?"horizontal":"vertical",variant:v?"scrollable":"standard",scrollButtons:"auto",className:t.tabList,children:C.map((function(e,n){return e?(0,l.jsx)(s.Z,(0,i.Z)((0,i.Z)({className:t.tabHeader,value:"".concat(n),style:L},e),{},{disableRipple:!0,disableTouchRipple:!0,focusRipple:!0}),"v-tab-".concat(n)):null}))})}),(0,l.jsxs)(o.Z,{className:t.tabContentContainer,children:[h?null:E.map((function(e,n){return(0,l.jsx)(S,{classes:(0,i.Z)({},t.tabPanel),value:"".concat(n),children:e||null},"v-tab-p-".concat(n))})),h?(0,l.jsx)("div",{className:t.tabPanel,children:f}):null]})]})})}))},879:function(e,n,t){t.d(n,{D_:function(){return o},Et:function(){return r},GJ:function(){return a},yh:function(){return i}});var i={RED:"#C83B51",GREEN:"#4CCB92",YELLOW:"#E7A219"},r=function(e,n){return e<=n/2?i.RED:2!==n&&e===n/2+1?i.YELLOW:e===n?i.GREEN:void 0},a=function(e){switch(e){case"offline":return i.RED;case"online":return i.GREEN;default:return i.YELLOW}},o=function(e,n){return e<=n/2?i.RED:e===n/2+1?i.YELLOW:e===n?i.GREEN:void 0}},1191:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var i=t(29439),r=t(1413),a=t(72791),o=t(78687),s=t(57689),l=t(75952),c=t(11135),d=t(25787),u=t(23814),f=t(35527),h=t(61889),p=t(40986),x=t(92983),m=t(81207),v=t(92217),b=t(63466),Z=t(27391),g=t(14917),j=t(74794),y=t(14662),C=t(84669),E=t(56087),P=t(38442),w=t(75578),S=t(64554),N=t(59114),T=t(879),M=t(80184),R={display:"grid",gridTemplateColumns:"60px 1fr",gap:"15px"},F=function(e){var n=e.search,t=void 0===n?"":n,i=e.children,r=void 0===i?"":i,a=new RegExp("(".concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}(t),")"),"i"),o=String(r).split(a);return t?o.map((function(e,n){return a.test(e)?(0,M.jsx)("mark",{children:e},n):e})):r},L=(0,d.Z)((function(e){return(0,c.Z)({searchField:(0,r.Z)((0,r.Z)({},u.qg.searchField),{},{maxWidth:380})})}))((function(e){var n=e.policyStatements,t=e.classes,r=void 0===t?{}:t,o=(0,a.useState)(""),s=(0,i.Z)(o,2),c=s[0],d=s[1];return(0,M.jsxs)(h.ZP,{container:!0,children:[(0,M.jsx)(h.ZP,{item:!0,xs:12,children:(0,M.jsxs)(S.Z,{sx:{display:"grid",gridTemplateColumns:{sm:"1fr 1fr",xs:"1fr"},alignItems:"center",justifyContent:"space-between",gap:"15px"},children:[(0,M.jsx)(S.Z,{children:"Statements"}),(0,M.jsx)(N.Z,{placeholder:"Search",onChange:d,overrideClass:r.searchField,value:c})]})}),(0,M.jsx)(h.ZP,{item:!0,xs:12,sx:{"& .policy-row":{borderBottom:"1px solid #eaeaea"},"& .policy-row:first-child":{borderTop:"1px solid #eaeaea"},"& .policy-row:last-child":{borderBottom:"0px"},paddingTop:"15px","& mark":{color:"#000000",fontWeight:500}},children:n.map((function(e,n){var t=e.Effect,i="Allow"===t;return(0,M.jsxs)(S.Z,{className:"policy-row",sx:{display:"grid",gridTemplateColumns:"1fr",gap:"15px",fontSize:"14px",padding:"10px 0 10px 0","& .label":{fontWeight:600}},children:[(0,M.jsxs)(S.Z,{sx:R,children:[(0,M.jsx)(S.Z,{className:"label",children:"Effect:"}),(0,M.jsxs)(S.Z,{sx:{display:"flex",alignItems:"center","& .min-icon":{marginRight:"5px",fill:i?T.yh.GREEN:T.yh.RED,height:"14px",width:"14px"}},children:[i?(0,M.jsx)(l.E31,{}):(0,M.jsx)(l.dRf,{}),t]})]}),(0,M.jsxs)(S.Z,{sx:{display:"grid",gridTemplateColumns:{sm:"1fr 1fr",xs:"1fr"},gap:"15px"},children:[(0,M.jsxs)(S.Z,{sx:R,children:[(0,M.jsx)(S.Z,{className:"label",children:"Actions:"}),(0,M.jsx)(S.Z,{children:e.Action&&e.Action.map((function(e,t){return(0,M.jsx)("div",{children:(0,M.jsx)(F,{search:c,children:e})},"".concat(n,"-r-").concat(t))}))})]}),(0,M.jsxs)(S.Z,{sx:R,children:[(0,M.jsx)(S.Z,{className:"label",children:"Resources:"}),(0,M.jsx)(S.Z,{children:e.Resource&&e.Resource.map((function(e,t){return(0,M.jsxs)("div",{children:[" ",(0,M.jsx)(F,{search:c,children:e})]},"".concat(n,"-r-").concat(t))}))})]})]})]},"".concat(n))}))})]})})),A=t(45248),k=t(87995),I=t(46078),O=t(25469),B=t(27454),D=(0,w.Z)(a.lazy((function(){return t.e(312).then(t.bind(t,312))}))),G=(0,d.Z)((function(e){return(0,c.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({buttonContainer:{display:"flex",justifyContent:"flex-end",paddingTop:16,"& button":{marginLeft:8}},pageContainer:{border:"1px solid #EAEAEA",height:"100%"},paperContainer:{padding:"15px 15px 15px 50px",minHeight:"450px"},statement:{border:"1px solid #DADADA",padding:8,marginBottom:8,borderRadius:4},labelCol:{fontWeight:"bold"}},u.OR),u.qg),u.oO),(0,u.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=(0,O.TL)(),r=(0,s.s0)(),c=(0,s.UO)(),d=(0,o.v9)(I.$4),u=(0,a.useState)(null),w=(0,i.Z)(u,2),S=w[0],N=w[1],T=(0,a.useState)([]),R=(0,i.Z)(T,2),F=R[0],G=R[1],H=(0,a.useState)([]),W=(0,i.Z)(H,2),U=W[0],z=W[1],_=(0,a.useState)([]),K=(0,i.Z)(_,2),Y=K[0],J=K[1],X=(0,a.useState)(!1),$=(0,i.Z)(X,2),q=$[0],V=$[1],Q=(0,A.IO)(c.policyName||""),ee=(0,a.useState)(""),ne=(0,i.Z)(ee,2),te=ne[0],ie=ne[1],re=(0,a.useState)(!0),ae=(0,i.Z)(re,2),oe=ae[0],se=ae[1],le=(0,a.useState)(""),ce=(0,i.Z)(le,2),de=ce[0],ue=ce[1],fe=(0,a.useState)(!0),he=(0,i.Z)(fe,2),pe=he[0],xe=he[1],me=(0,a.useState)(""),ve=(0,i.Z)(me,2),be=ve[0],Ze=ve[1],ge=(0,a.useState)(!0),je=(0,i.Z)(ge,2),ye=je[0],Ce=je[1],Ee=(0,a.useState)(!1),Pe=(0,i.Z)(Ee,2),we=Pe[0],Se=Pe[1],Ne=d&&d.includes("ldap-idp")||!1,Te=(0,P.F)(E.C3,E.K6,!0),Me=(0,P.F)(E.C3,E.k_,!0),Re=(0,P.F)(E.C3,E.Rs,!0),Fe=(0,P.F)(E.C3,E.iw,!0),Le=(0,P.F)(E.C3,E.GD,!0),Ae=(0,P.F)(E.C3,E.bE,!0),ke=(0,P.F)(E.C3,E.XM,!0);(0,a.useEffect)((function(){oe&&(oe&&(Le?m.Z.invoke("GET","/api/v1/policy/".concat((0,A.LL)(Q))).then((function(e){if(e){N(e),ie(e?JSON.stringify(JSON.parse(e.policy),null,4):"");var n=JSON.parse(e.policy);G(n.Statement)}se(!1)})).catch((function(e){t((0,k.Ih)(e)),se(!1)})):se(!1)),pe&&(Re&&!Ne?m.Z.invoke("GET","/api/v1/policies/".concat((0,A.LL)(Q),"/users")).then((function(e){z(e),xe(!1)})).catch((function(e){t((0,k.Ih)(e)),xe(!1)})):xe(!1)),ye&&(Te&&!Ne?m.Z.invoke("GET","/api/v1/policies/".concat((0,A.LL)(Q),"/groups")).then((function(e){J(e),Ce(!1)})).catch((function(e){t((0,k.Ih)(e)),Ce(!1)})):Ce(!1)))}),[Q,oe,pe,ye,z,J,ie,N,xe,Ce,Re,Te,Le,Ne,t]);var Ie=""!==Q.trim(),Oe=[{type:"view",onClick:function(e){r("".concat(E.gA.USERS,"/").concat((0,A.LL)(e)))},disableButtonFunction:function(){return!Fe}}],Be=U.filter((function(e){return e.includes(de)})),De=[{type:"view",onClick:function(e){r("".concat(E.gA.GROUPS,"/").concat((0,A.LL)(e)))},disableButtonFunction:function(){return!Me}}],Ge=Y.filter((function(e){return e.includes(be)})),He=function(){xe(!0),Ce(!0),se(!0)};return(0,M.jsxs)(a.Fragment,{children:[we&&(0,M.jsx)(D,{deleteOpen:we,selectedPolicy:Q,closeDeleteModalAndRefresh:function(e){Se(!1),r(E.gA.POLICIES)}}),(0,M.jsx)(l.mr1,{label:(0,M.jsx)(a.Fragment,{children:(0,M.jsx)(C.Z,{to:E.gA.POLICIES,label:"Policy"})})}),(0,M.jsxs)(j.Z,{className:n.pageContainer,children:[(0,M.jsx)(h.ZP,{item:!0,xs:12,children:(0,M.jsx)(g.Z,{icon:(0,M.jsx)(a.Fragment,{children:(0,M.jsx)(l.v42,{width:40})}),title:Q,subTitle:(0,M.jsx)(a.Fragment,{children:"IAM Policy"}),actions:(0,M.jsxs)(a.Fragment,{children:[(0,M.jsx)(P.s,{scopes:[E.Ft.ADMIN_DELETE_POLICY],resource:E.C3,errorProps:{disabled:!0},children:(0,M.jsx)(B.Z,{tooltip:Ae?"":(0,E.MK)(E.bE,"delete Policies"),children:(0,M.jsx)(l.zxk,{id:"delete-policy",label:"Delete Policy",variant:"secondary",icon:(0,M.jsx)(l.XHJ,{}),onClick:function(){Se(!0)},disabled:!Ae})})}),(0,M.jsx)(B.Z,{tooltip:"Refresh",children:(0,M.jsx)(l.zxk,{id:"refresh-policy",label:"Refresh",variant:"regular",icon:(0,M.jsx)(l.DuK,{}),onClick:function(){He()}})})]})})}),(0,M.jsxs)(y.Z,{children:[{tabConfig:{label:"Summary",disabled:!Le},content:(0,M.jsxs)(a.Fragment,{children:[(0,M.jsx)("div",{className:n.sectionTitle,children:"Policy Summary"}),(0,M.jsx)(f.Z,{className:n.paperContainer,children:(0,M.jsx)(L,{policyStatements:F})})]})},{tabConfig:{label:"Users",disabled:!Re||Ne},content:(0,M.jsxs)(a.Fragment,{children:[(0,M.jsx)("div",{className:n.sectionTitle,children:"Users"}),(0,M.jsxs)(h.ZP,{container:!0,children:[U.length>0&&(0,M.jsx)(h.ZP,{item:!0,xs:12,className:n.actionsTray,children:(0,M.jsx)(Z.Z,{placeholder:"Search Users",className:n.searchField,id:"search-resource",label:"",onChange:function(e){ue(e.target.value)},InputProps:{disableUnderline:!0,startAdornment:(0,M.jsx)(b.Z,{position:"start",children:(0,M.jsx)(l.W1M,{})})},variant:"standard"})}),(0,M.jsx)(x.Z,{itemActions:Oe,columns:[{label:"Name",elementKey:"name"}],isLoading:pe,records:Be,entityName:"Users with this Policy associated",idField:"name"})]})]})},{tabConfig:{label:"Groups",disabled:!Te||Ne},content:(0,M.jsxs)(a.Fragment,{children:[(0,M.jsx)("div",{className:n.sectionTitle,children:"Groups"}),(0,M.jsxs)(h.ZP,{container:!0,children:[Y.length>0&&(0,M.jsx)(h.ZP,{item:!0,xs:12,className:n.actionsTray,children:(0,M.jsx)(Z.Z,{placeholder:"Search Groups",className:n.searchField,id:"search-resource",label:"",onChange:function(e){Ze(e.target.value)},InputProps:{disableUnderline:!0,startAdornment:(0,M.jsx)(b.Z,{position:"start",children:(0,M.jsx)(l.W1M,{})})},variant:"standard"})}),(0,M.jsx)(x.Z,{itemActions:De,columns:[{label:"Name",elementKey:"name"}],isLoading:ye,records:Ge,entityName:"Groups with this Policy associated",idField:"name"})]})]})},{tabConfig:{label:"Raw Policy",disabled:!Le},content:(0,M.jsxs)(a.Fragment,{children:[(0,M.jsx)("div",{className:n.sectionTitle,children:"Raw Policy"}),(0,M.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),q||(V(!0),ke?m.Z.invoke("POST","/api/v1/policies",{name:Q,policy:te}).then((function(e){V(!1),t((0,k.y1)("Policy successfully updated")),He()})).catch((function(e){V(!1),t((0,k.Ih)(e))})):V(!1))},children:(0,M.jsxs)(h.ZP,{container:!0,children:[(0,M.jsx)(h.ZP,{item:!0,xs:12,children:(0,M.jsx)(v.Z,{readOnly:!ke,value:te,onBeforeChange:function(e,n,t){ie(t)},editorHeight:"350px"})}),(0,M.jsxs)(h.ZP,{item:!0,xs:12,className:n.buttonContainer,children:[!S&&(0,M.jsx)("button",{type:"button",color:"primary",className:n.clearButton,onClick:function(){ie("{}")},children:"Clear"}),(0,M.jsx)(P.s,{scopes:[E.Ft.ADMIN_CREATE_POLICY],resource:E.C3,errorProps:{disabled:!0},children:(0,M.jsx)(B.Z,{tooltip:ke?"":(0,E.MK)(E.XM,"edit a Policy"),children:(0,M.jsx)(l.zxk,{id:"save",type:"submit",variant:"callAction",color:"primary",disabled:q||!Ie||!ke,label:"Save"})})})]}),q&&(0,M.jsx)(h.ZP,{item:!0,xs:12,children:(0,M.jsx)(p.Z,{})})]})})]})}]})]})]})}))},95193:function(e,n,t){var i;t.d(n,{Z:function(){return f}});var r=t(29439),a=t(72791),o=t(69120),s=t(33073),l=t(40162);function c(e,n,t,i,o){var s="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,c=a.useState((function(){return o&&s?t(e).matches:i?i(e).matches:n})),d=(0,r.Z)(c,2),u=d[0],f=d[1];return(0,l.Z)((function(){var n=!0;if(s){var i=t(e),r=function(){n&&f(i.matches)};return r(),i.addListener(r),function(){n=!1,i.removeListener(r)}}}),[e,t,s]),u}var d=(i||(i=t.t(a,2))).useSyncExternalStore;function u(e,n,t,i){var o=a.useCallback((function(){return n}),[n]),s=a.useMemo((function(){if(null!==i){var n=i(e).matches;return function(){return n}}return o}),[o,e,i]),l=a.useMemo((function(){if(null===t)return[o,function(){return function(){}}];var n=t(e);return[function(){return n.matches},function(e){return n.addListener(e),function(){n.removeListener(e)}}]}),[o,t,e]),c=(0,r.Z)(l,2),u=c[0],f=c[1];return d(f,u,s)}function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,o.Z)(),i="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,r=(0,s.Z)({name:"MuiUseMediaQuery",props:n,theme:t}),a=r.defaultMatches,l=void 0!==a&&a,f=r.matchMedia,h=void 0===f?i?window.matchMedia:null:f,p=r.ssrMatchMedia,x=void 0===p?null:p,m=r.noSsr;var v="function"===typeof e?e(t):e;v=v.replace(/^@media( ?)/m,"");var b=void 0!==d?u:c,Z=b(v,l,h,x,m);return Z}}}]);
//# sourceMappingURL=6554.5c18a119.chunk.js.map