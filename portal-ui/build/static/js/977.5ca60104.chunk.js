"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[977],{10977:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var i=n(29439),r=n(1413),s=n(72791),a=n(61889),l=n(40986),o=n(57689),c=n(75952),u=n(11135),d=n(25787),x=n(23814),h=n(21435),j=n(83679),b=n(45248),f=n(25469),g=n(78687),m=n(37516),p=n(84669),k=n(87995),v=n(81207),T=n(74794),Z=n(56578),y=n(25739),C=n(27454),_=n(50896),B=n(64561),P=n(92717),F=n(80184),S=function(e){var t=e.hasErrors,n=(0,f.TL)(),i=(0,g.v9)((function(e){return e.addBucket.name}));return(0,F.jsx)(h.Z,{id:"bucket-name",name:"bucket-name",error:t?"Invalid bucket name":"",onFocus:function(){n((0,B.hU)(!0))},onChange:function(e){n((0,B.qC)(e.target.value))},label:"Bucket Name",value:i,required:!0})},E=n(56087),N=n(38442),U=function(e){var t=e.ruleText;return(0,F.jsx)(s.Fragment,{children:(0,F.jsxs)(a.ZP,{container:!0,style:{display:"flex",justifyContent:"flex-start"},children:[(0,F.jsx)(a.ZP,{item:!0,xs:1,paddingRight:1,children:(0,F.jsx)(c.EjK,{width:"16px",height:"16px",style:{color:"#18BF42"}})}),(0,F.jsx)(a.ZP,{item:!0,xs:9,paddingLeft:1,style:{color:"#8f949c",display:"flex",justifyContent:"flex-start"},children:t})]})})},I=function(e){var t=e.ruleText;return(0,F.jsx)(s.Fragment,{children:(0,F.jsxs)(a.ZP,{container:!0,style:{color:"#C83B51",display:"flex",justifyContent:"flex-start"},children:[(0,F.jsx)(a.ZP,{item:!0,xs:1,paddingRight:1,children:(0,F.jsx)(c.NvT,{width:"16px",height:"16px"})}),(0,F.jsx)(a.ZP,{item:!0,xs:9,paddingLeft:1,style:{color:"#C83B51",display:"flex",justifyContent:"flex-start"},children:t})]})})},O=function(e){var t=e.ruleText;return(0,F.jsx)(s.Fragment,{children:(0,F.jsxs)(a.ZP,{container:!0,style:{display:"flex",justifyContent:"flex-start"},children:[(0,F.jsx)(a.ZP,{item:!0,xs:1,paddingRight:1,children:(0,F.jsx)(c.J$M,{width:"12px",height:"12px",style:{color:"#8f949c"}})}),(0,F.jsx)(a.ZP,{item:!0,xs:9,paddingLeft:1,style:{color:"#8f949c",display:"flex",justifyContent:"flex-start"},children:t})]})})},w=function(e){var t=e.errorList,n="Bucket names must be between 3 (min) and 63 (max) characters long.",r="Bucket names can consist only of lowercase letters, numbers, dots (.), and hyphens (-).",o="Bucket names must not contain two adjacent periods, or a period adjacent to a hyphen.",u="Bucket names must not be formatted as an IP address (for example, 192.168.5.4).",d="Bucket names must not start with the prefix xn--.",x="Bucket names must not end with the suffix -s3alias. This suffix is reserved for access point alias names.",h="Bucket names must be unique within a partition.",j=(0,g.v9)((function(e){return e.addBucket.name})),b=(0,s.useState)(!1),f=(0,i.Z)(b,2),m=f[0],p=f[1],k=(0,g.v9)((function(e){return e.addBucket.loading})),v=(0,i.Z)(t,7),T=v[0],Z=v[1],y=v[2],C=v[3],_=v[4],B=v[5],P=v[6];return(0,F.jsxs)(s.Fragment,{children:[(0,F.jsx)(c.zxk,{type:"button",id:"toggle-naming-rules",onClick:function(){p(!m)},icon:m?(0,F.jsx)(c.ZyT,{}):(0,F.jsx)(c.ASC,{}),label:(m?"Hide":"View")+" Bucket Naming Rules",style:{height:"10px",width:"200px",textAlign:"left",paddingLeft:0,fontSize:"9px",border:"none"}}),m&&(0,F.jsxs)(a.ZP,{container:!0,fontSize:14,paddingTop:2,children:[(0,F.jsxs)(a.ZP,{item:!0,xs:6,children:[0===j.length?(0,F.jsx)(O,{ruleText:n}):T?(0,F.jsx)(U,{ruleText:n}):(0,F.jsx)(I,{ruleText:n}),0===j.length?(0,F.jsx)(O,{ruleText:r}):Z?(0,F.jsx)(U,{ruleText:r}):(0,F.jsx)(I,{ruleText:r}),0===j.length?(0,F.jsx)(O,{ruleText:o}):y?(0,F.jsx)(U,{ruleText:o}):(0,F.jsx)(I,{ruleText:o}),0===j.length?(0,F.jsx)(O,{ruleText:u}):C?(0,F.jsx)(U,{ruleText:u}):(0,F.jsx)(I,{ruleText:u})]}),(0,F.jsxs)(a.ZP,{item:!0,xs:6,children:[0===j.length?(0,F.jsx)(O,{ruleText:d}):_?(0,F.jsx)(U,{ruleText:d}):(0,F.jsx)(I,{ruleText:d}),0===j.length?(0,F.jsx)(O,{ruleText:x}):B?(0,F.jsx)(U,{ruleText:x}):(0,F.jsx)(I,{ruleText:x}),0===j.length?(0,F.jsx)(O,{ruleText:h}):P?(0,F.jsx)(U,{ruleText:h}):(0,F.jsx)(I,{ruleText:h})]})]}),k&&(0,F.jsx)(a.ZP,{item:!0,xs:12,children:(0,F.jsx)(l.Z,{})})]})},R=(0,d.Z)((function(e){return(0,u.Z)((0,r.Z)({buttonContainer:{marginTop:24,display:"flex",justifyContent:"flex-end","& button":{marginLeft:8}},error:{color:"#b53b4b",border:"1px solid #b53b4b",padding:8,borderRadius:3},alertVersioning:{border:"#E2E2E2 1px solid",backgroundColor:"#FBFAFA",borderRadius:3,display:"flex",alignItems:"center",padding:"10px",color:"#767676","& > .min-icon ":{width:20,height:20,marginRight:10}},title:{marginBottom:8},headTitle:{fontWeight:"bold",fontSize:16,paddingLeft:8},h6title:{fontWeight:"bold",color:"#000000",fontSize:20}},(0,x.Bz)(e.spacing(4))))}))((function(e){var t=e.classes,n=(0,f.TL)(),r=(0,o.s0)(),u=new RegExp("^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$"),d=new RegExp("^(\\d+\\.){3}\\d+$"),x=(0,g.v9)((function(e){return e.addBucket.name})),U=(0,g.v9)((function(e){return e.addBucket.isDirty})),I=(0,s.useState)([]),O=(0,i.Z)(I,2),R=O[0],q=O[1],z=R.filter((function(e){return!e})).length>0,L=(0,s.useState)([]),V=(0,i.Z)(L,2),K=V[0],A=V[1],G=(0,g.v9)((function(e){return e.addBucket.versioningEnabled})),M=(0,g.v9)((function(e){return e.addBucket.lockingEnabled})),D=(0,g.v9)((function(e){return e.addBucket.quotaEnabled})),W=(0,g.v9)((function(e){return e.addBucket.quotaSize})),J=(0,g.v9)((function(e){return e.addBucket.quotaUnit})),Q=(0,g.v9)((function(e){return e.addBucket.retentionEnabled})),Y=(0,g.v9)((function(e){return e.addBucket.retentionMode})),$=(0,g.v9)((function(e){return e.addBucket.retentionUnit})),H=(0,g.v9)((function(e){return e.addBucket.retentionValidity})),X=(0,g.v9)((function(e){return e.addBucket.loading})),ee=(0,g.v9)((function(e){return e.addBucket.invalidFields})),te=(0,g.v9)((function(e){return e.addBucket.lockingFieldDisabled})),ne=(0,g.v9)(k.N5),ie=(0,g.v9)(k.gw),re=(0,g.v9)((function(e){return e.addBucket.navigateTo})),se=(0,N.F)("*",[E.Ft.S3_PUT_BUCKET_VERSIONING,E.Ft.S3_PUT_BUCKET_OBJECT_LOCK_CONFIGURATION,E.Ft.S3_PUT_ACTIONS],!0),ae=(0,N.F)("*",[E.Ft.S3_PUT_BUCKET_VERSIONING,E.Ft.S3_PUT_ACTIONS]);(0,s.useEffect)((function(){var e=[!(U&&(x.length<3||x.length>63)),u.test(x),!(x.includes(".-")||x.includes("-.")||x.includes("..")),!d.test(x),!x.startsWith("xn--"),!x.endsWith("-s3alias"),!K.includes(x)];q(e)}),[x,U]),(0,s.useEffect)((function(){n((0,B.qC)("")),n((0,B.hU)(!1));v.Z.invoke("GET","/api/v1/buckets").then((function(e){var t=[];null!=e.buckets&&e.buckets.length>0&&e.buckets.forEach((function(e){t.push(e.name)})),A(t)})).catch((function(e){n((0,k.Ih)(e))}))}),[n]);return(0,s.useEffect)((function(){if(""!==re){var e="".concat(re);n((0,B.Fx)()),r(e)}}),[re,r,n]),(0,F.jsxs)(s.Fragment,{children:[(0,F.jsx)(c.mr1,{label:(0,F.jsx)(p.Z,{to:"/buckets",label:"Buckets"})}),(0,F.jsx)(T.Z,{children:(0,F.jsx)(y.Z,{title:"Create Bucket",icon:(0,F.jsx)(c.wNb,{}),helpbox:(0,F.jsx)(c.KfX,{iconComponent:(0,F.jsx)(c.wNb,{}),title:"Buckets",help:(0,F.jsxs)(s.Fragment,{children:["MinIO uses buckets to organize objects. A bucket is similar to a folder or directory in a filesystem, where each bucket can hold an arbitrary number of objects.",(0,F.jsx)("br",{}),(0,F.jsx)("br",{}),(0,F.jsx)("b",{children:"Versioning"})," allows to keep multiple versions of the same object under the same key.",(0,F.jsx)("br",{}),(0,F.jsx)("br",{}),(0,F.jsx)("b",{children:"Object Locking"})," prevents objects from being deleted. Required to support retention and legal hold. Can only be enabled at bucket creation.",(0,F.jsx)("br",{}),(0,F.jsx)("br",{}),(0,F.jsx)("b",{children:"Quota"})," limits the amount of data in the bucket.",se&&(0,F.jsxs)(s.Fragment,{children:[(0,F.jsx)("br",{}),(0,F.jsx)("br",{}),(0,F.jsx)("b",{children:"Retention"})," imposes rules to prevent object deletion for a period of time. Versioning must be enabled in order to set bucket retention policies."]}),(0,F.jsx)("br",{}),(0,F.jsx)("br",{})]})}),children:(0,F.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),n((0,P.I)())},children:[(0,F.jsxs)(a.ZP,{container:!0,marginTop:1,spacing:2,children:[(0,F.jsx)(a.ZP,{item:!0,xs:12,children:(0,F.jsx)(S,{hasErrors:z})}),(0,F.jsx)(a.ZP,{item:!0,xs:12,children:(0,F.jsx)(w,{errorList:R})}),(0,F.jsxs)(a.ZP,{item:!0,xs:12,children:[(0,F.jsx)(_.Z,{children:"Features"}),!ne&&(0,F.jsxs)(s.Fragment,{children:[(0,F.jsxs)("div",{className:t.error,children:["These features are unavailable in a single-disk setup.",(0,F.jsx)("br",{}),"Please deploy a server in"," ",(0,F.jsx)("a",{href:"https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-multi-node-multi-drive.html?ref=con",target:"_blank",rel:"noopener",children:"Distributed Mode"})," ","to use these features."]}),(0,F.jsx)("br",{}),(0,F.jsx)("br",{})]})]}),(0,F.jsxs)(a.ZP,{item:!0,xs:12,spacing:2,children:[ie.enabled&&(0,F.jsxs)(s.Fragment,{children:[(0,F.jsx)("br",{}),(0,F.jsxs)("div",{className:t.alertVersioning,children:[(0,F.jsx)(c.szr,{})," Versioning setting cannot be changed as cluster replication is enabled for this site."]}),(0,F.jsx)("br",{})]}),(0,F.jsx)(C.Z,{tooltip:ae?M&&G?"You must disable Locking before Versioning can be disabled":"":(0,E.MK)([E.Ft.S3_PUT_BUCKET_VERSIONING,E.Ft.S3_PUT_ACTIONS],"Versioning"),children:(0,F.jsx)(m.Z,{value:"versioned",id:"versioned",name:"versioned",checked:G,onChange:function(e){n((0,B.E2)(e.target.checked))},label:"Versioning",disabled:!ne||M||ie.enabled||!ae})})]}),(0,F.jsx)(a.ZP,{item:!0,xs:12,children:(0,F.jsx)(C.Z,{tooltip:se?"":(0,E.MK)([E.Ft.S3_PUT_BUCKET_VERSIONING,E.Ft.S3_PUT_BUCKET_OBJECT_LOCK_CONFIGURATION,E.Ft.S3_PUT_ACTIONS],"Locking"),children:(0,F.jsx)(m.Z,{value:"locking",id:"locking",name:"locking",disabled:te||!ne||!se,checked:M,onChange:function(e){n((0,B.j9)(e.target.checked)),e.target.checked&&!ie.enabled&&n((0,B.E2)(!0))},label:"Object Locking"})})}),(0,F.jsx)(a.ZP,{item:!0,xs:12,children:(0,F.jsx)(m.Z,{value:"bucket_quota",id:"bucket_quota",name:"bucket_quota",checked:D,onChange:function(e){n((0,B.WC)(e.target.checked))},label:"Quota",disabled:!ne})}),D&&ne&&(0,F.jsx)(s.Fragment,{children:(0,F.jsx)(a.ZP,{item:!0,xs:12,children:(0,F.jsx)(h.Z,{type:"string",id:"quota_size",name:"quota_size",onChange:function(e){n((0,B.Rj)(e.target.value))},label:"Capacity",value:W,required:!0,min:"1",overlayObject:(0,F.jsx)(Z.Z,{id:"quota_unit",onUnitChange:function(e){n((0,B.ND)(e))},unitSelected:J,unitsList:(0,b.zQ)(["Ki"]),disabled:!1}),error:ee.includes("quotaSize")?"Please enter a valid quota":""})})}),G&&ne&&se&&(0,F.jsx)(a.ZP,{item:!0,xs:12,children:(0,F.jsx)(m.Z,{value:"bucket_retention",id:"bucket_retention",name:"bucket_retention",checked:Q,onChange:function(e){n((0,B.bc)(e.target.checked))},label:"Retention"})}),Q&&ne&&(0,F.jsxs)(s.Fragment,{children:[(0,F.jsx)(a.ZP,{item:!0,xs:12,children:(0,F.jsx)(j.Z,{currentSelection:Y,id:"retention_mode",name:"retention_mode",label:"Mode",onChange:function(e){n((0,B.VK)(e.target.value))},selectorOptions:[{value:"compliance",label:"Compliance"},{value:"governance",label:"Governance"}]})}),(0,F.jsx)(a.ZP,{item:!0,xs:12,children:(0,F.jsx)(h.Z,{type:"number",id:"retention_validity",name:"retention_validity",onChange:function(e){n((0,B.Mn)(e.target.valueAsNumber))},label:"Validity",value:String(H),required:!0,overlayObject:(0,F.jsx)(Z.Z,{id:"retention_unit",onUnitChange:function(e){n((0,B.hx)(e))},unitSelected:$,unitsList:[{value:"days",label:"Days"},{value:"years",label:"Years"}],disabled:!1})})})]})]}),(0,F.jsxs)(a.ZP,{item:!0,xs:12,className:t.buttonContainer,children:[(0,F.jsx)(c.zxk,{id:"clear",type:"button",variant:"regular",className:t.clearButton,onClick:function(){n((0,B.Fx)())},label:"Clear"}),(0,F.jsx)(C.Z,{tooltip:ee.length>0||!U||z?"You must apply a valid name to the bucket":"",children:(0,F.jsx)(c.zxk,{id:"create-bucket",type:"submit",variant:"callAction",color:"primary",disabled:X||ee.length>0||!U||z,label:"Create Bucket"})})]}),X&&(0,F.jsx)(a.ZP,{item:!0,xs:12,children:(0,F.jsx)(l.Z,{})})]})})})]})}))},25739:function(e,t,n){n(72791);var i=n(64554),r=n(50896),s=n(80184);t.Z=function(e){var t=e.children,n=e.title,a=e.helpbox,l=e.icon;return(0,s.jsxs)(i.Z,{sx:{display:"grid",padding:"25px",gap:"25px",gridTemplateColumns:{md:"2fr 1.2fr",xs:"1fr"},border:"1px solid #eaeaea"},children:[(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(r.Z,{icon:l,children:n}),(0,s.jsx)(i.Z,{sx:{height:16}}),t]}),a]})}}}]);
//# sourceMappingURL=977.5ca60104.chunk.js.map